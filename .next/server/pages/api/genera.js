"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/genera";
exports.ids = ["pages/api/genera"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "openai":
/*!*************************!*\
  !*** external "openai" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("openai");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenera&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fgenera.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenera&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fgenera.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_genera_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/genera.ts */ \"(api)/./pages/api/genera.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_genera_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_genera_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_genera_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_genera_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/genera\",\n        pathname: \"/api/genera\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_genera_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmdlbmVyYSZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGZ2VuZXJhLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ2tEO0FBQ2xEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxpREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsaURBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2NyaXB0Zm9yZ2UtbmV4dC8/Mzk3MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL2dlbmVyYS50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2dlbmVyYVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2dlbmVyYVwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenera&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fgenera.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/genera.ts":
/*!*****************************!*\
  !*** ./pages/api/genera.ts ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"openai\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([openai__WEBPACK_IMPORTED_MODULE_0__]);\nopenai__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// /pages/api/genera.ts\n\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\nasync function handler(req, res) {\n    if (req.method !== \"POST\") return res.status(405).end();\n    const { topic, niche, style, intensity } = req.body;\n    try {\n        // Crea un nuovo thread di conversazione\n        const thread = await openai.beta.threads.create();\n        // Aggiungi il messaggio dell'utente al thread\n        await openai.beta.threads.messages.create(thread.id, {\n            role: \"user\",\n            content: `\n  Crea uno script lungo (1200–1500 parole) in stile narrativo riflessivo ed epico, basato su questo personaggio/anime/tema: “${topic}”\n\n  Lo script deve essere creato sulla base delle scelte dell’utente e sarà quindi:\n  – Scorrevole e coinvolgente, con uno stile da documentario emotivo o storytelling YouTube\n  – Strutturato in forma narrativa fluida (no scalette), con transizioni psicologiche forti (es. “ed è qui che tutto cambia”)\n  – Capace di evolversi nel tono (es. da riflessivo a epico)\n  – Perfettamente adatto alla registrazione audio\n\n  Includi obbligatoriamente:\n  – 1200/1500 parole di script e della durata di 10 minuti\n  – Voice-over integrato (tra parentesi: tono, ritmo, pause)\n  – Scene con timestamp verificati (episodio + minuto esatto, fonti affidabili)\n  – Approfondimenti culturali, psicologici o simbolici\n  – Montaggio suggerito: evidenzia i momenti visivi più forti o emotivi\n  – Call to action narrativa *inserita nell’ultima frase*, senza chiusura esplicita\n\n  Se possibile, aggiungi anche:\n  – Titolo YouTube ottimizzato per CTR e curiosità\n  – Descrizione SEO con parole chiave e hashtag\n\n  Una volta completato tutto, riscrivi lo script sotto forma di **testo esteso in stile parlato**, contenente tutto lo script in forma fluida e naturale, come se fosse già pronto per essere registrato dal voice-over, senza sintesi o riassunti.\n\n  Queste sono le preferenze dell’utente:\n  – Nicchia: ${niche}\n  – Stile narrativo scelto: ${style}\n  – Intensità emotiva: ${intensity}\n  `\n        });\n        // Avvia il run con l'Assistant personale\n        const run = await openai.beta.threads.runs.create(thread.id, {\n            assistant_id: \"asst_k8nUpECUsPnjCgPOfNdrs9el\"\n        });\n        // Aspetta che il run sia completato\n        let result = null;\n        for(let i = 0; i < 20; i++){\n            await new Promise((r)=>setTimeout(r, 1500));\n            const check = await openai.beta.threads.runs.retrieve(thread.id, run.id);\n            if (check.status === \"completed\") {\n                result = check;\n                break;\n            }\n        }\n        if (!result) {\n            return res.status(500).json({\n                error: \"Timeout durante la generazione dello script\"\n            });\n        }\n        // Recupera l'ultima risposta dell'assistente\n        // Recupera tutti i messaggi\n        const messages = await openai.beta.threads.messages.list(thread.id);\n        console.log(\"MESSAGES:\", JSON.stringify(messages.data, null, 2));\n        // Trova il messaggio più recente dell'assistente\n        const lastAssistantMessage = messages.data.find((m)=>m.role === \"assistant\");\n        if (!lastAssistantMessage) {\n            console.warn(\"Nessun messaggio dell’assistente trovato\");\n            return res.status(200).json({\n                script: \"Nessuna risposta generata\"\n            });\n        }\n        // Cerca il contenuto di tipo \"text\"\n        const textBlock = lastAssistantMessage.content.find((c)=>c.type === \"text\");\n        if (!textBlock || !(\"text\" in textBlock)) {\n            console.warn(\"Nessun contenuto testuale nel messaggio:\", lastAssistantMessage.content);\n            return res.status(200).json({\n                script: \"Nessuna risposta generata\"\n            });\n        }\n        const script = textBlock.text.value.trim();\n        res.status(200).json({\n            script\n        });\n    } catch (error) {\n        console.error(error);\n        res.status(500).json({\n            error: \"Errore nella generazione con Assistant\"\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0MsVUFBVUcsSUFBSSxDQUFDQyxLQUFLLENBQUNDLElBQUk7UUFDeEM3QyxJQUFJRSxNQUFNLENBQUMsS0FBS3lCLElBQUksQ0FBQztZQUFFWTtRQUFPO0lBQ2hDLEVBQ0EsT0FBT1gsT0FBTztRQUNkRSxRQUFRRixLQUFLLENBQUNBO1FBQ2Q1QixJQUFJRSxNQUFNLENBQUMsS0FBS3lCLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQXlDO0lBQ3pFO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zY3JpcHRmb3JnZS1uZXh0Ly4vcGFnZXMvYXBpL2dlbmVyYS50cz9kODA3Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIC9wYWdlcy9hcGkvZ2VuZXJhLnRzXG5pbXBvcnQgdHlwZSB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcbmltcG9ydCBPcGVuQUkgZnJvbSAnb3BlbmFpJztcblxuY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSSh7XG4gIGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVksXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xuICBpZiAocmVxLm1ldGhvZCAhPT0gJ1BPU1QnKSByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmVuZCgpO1xuXG4gIGNvbnN0IHsgdG9waWMsIG5pY2hlLCBzdHlsZSwgaW50ZW5zaXR5IH0gPSByZXEuYm9keTtcblxuICB0cnkge1xuICAgIFxuICAgIC8vIENyZWEgdW4gbnVvdm8gdGhyZWFkIGRpIGNvbnZlcnNhemlvbmVcbiAgICBjb25zdCB0aHJlYWQgPSBhd2FpdCBvcGVuYWkuYmV0YS50aHJlYWRzLmNyZWF0ZSgpO1xuXG4gICAgLy8gQWdnaXVuZ2kgaWwgbWVzc2FnZ2lvIGRlbGwndXRlbnRlIGFsIHRocmVhZFxuICAgIGF3YWl0IG9wZW5haS5iZXRhLnRocmVhZHMubWVzc2FnZXMuY3JlYXRlKHRocmVhZC5pZCwge1xuICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgY29udGVudDogYFxuICBDcmVhIHVubyBzY3JpcHQgbHVuZ28gKDEyMDDigJMxNTAwIHBhcm9sZSkgaW4gc3RpbGUgbmFycmF0aXZvIHJpZmxlc3Npdm8gZWQgZXBpY28sIGJhc2F0byBzdSBxdWVzdG8gcGVyc29uYWdnaW8vYW5pbWUvdGVtYTog4oCcJHt0b3BpY33igJ1cblxuICBMbyBzY3JpcHQgZGV2ZSBlc3NlcmUgY3JlYXRvIHN1bGxhIGJhc2UgZGVsbGUgc2NlbHRlIGRlbGzigJl1dGVudGUgZSBzYXLDoCBxdWluZGk6XG4gIOKAkyBTY29ycmV2b2xlIGUgY29pbnZvbGdlbnRlLCBjb24gdW5vIHN0aWxlIGRhIGRvY3VtZW50YXJpbyBlbW90aXZvIG8gc3Rvcnl0ZWxsaW5nIFlvdVR1YmVcbiAg4oCTIFN0cnV0dHVyYXRvIGluIGZvcm1hIG5hcnJhdGl2YSBmbHVpZGEgKG5vIHNjYWxldHRlKSwgY29uIHRyYW5zaXppb25pIHBzaWNvbG9naWNoZSBmb3J0aSAoZXMuIOKAnGVkIMOoIHF1aSBjaGUgdHV0dG8gY2FtYmlh4oCdKVxuICDigJMgQ2FwYWNlIGRpIGV2b2x2ZXJzaSBuZWwgdG9ubyAoZXMuIGRhIHJpZmxlc3Npdm8gYSBlcGljbylcbiAg4oCTIFBlcmZldHRhbWVudGUgYWRhdHRvIGFsbGEgcmVnaXN0cmF6aW9uZSBhdWRpb1xuXG4gIEluY2x1ZGkgb2JibGlnYXRvcmlhbWVudGU6XG4gIOKAkyAxMjAwLzE1MDAgcGFyb2xlIGRpIHNjcmlwdCBlIGRlbGxhIGR1cmF0YSBkaSAxMCBtaW51dGlcbiAg4oCTIFZvaWNlLW92ZXIgaW50ZWdyYXRvICh0cmEgcGFyZW50ZXNpOiB0b25vLCByaXRtbywgcGF1c2UpXG4gIOKAkyBTY2VuZSBjb24gdGltZXN0YW1wIHZlcmlmaWNhdGkgKGVwaXNvZGlvICsgbWludXRvIGVzYXR0bywgZm9udGkgYWZmaWRhYmlsaSlcbiAg4oCTIEFwcHJvZm9uZGltZW50aSBjdWx0dXJhbGksIHBzaWNvbG9naWNpIG8gc2ltYm9saWNpXG4gIOKAkyBNb250YWdnaW8gc3VnZ2VyaXRvOiBldmlkZW56aWEgaSBtb21lbnRpIHZpc2l2aSBwacO5IGZvcnRpIG8gZW1vdGl2aVxuICDigJMgQ2FsbCB0byBhY3Rpb24gbmFycmF0aXZhICppbnNlcml0YSBuZWxs4oCZdWx0aW1hIGZyYXNlKiwgc2VuemEgY2hpdXN1cmEgZXNwbGljaXRhXG5cbiAgU2UgcG9zc2liaWxlLCBhZ2dpdW5naSBhbmNoZTpcbiAg4oCTIFRpdG9sbyBZb3VUdWJlIG90dGltaXp6YXRvIHBlciBDVFIgZSBjdXJpb3NpdMOgXG4gIOKAkyBEZXNjcml6aW9uZSBTRU8gY29uIHBhcm9sZSBjaGlhdmUgZSBoYXNodGFnXG5cbiAgVW5hIHZvbHRhIGNvbXBsZXRhdG8gdHV0dG8sIHJpc2NyaXZpIGxvIHNjcmlwdCBzb3R0byBmb3JtYSBkaSAqKnRlc3RvIGVzdGVzbyBpbiBzdGlsZSBwYXJsYXRvKiosIGNvbnRlbmVudGUgdHV0dG8gbG8gc2NyaXB0IGluIGZvcm1hIGZsdWlkYSBlIG5hdHVyYWxlLCBjb21lIHNlIGZvc3NlIGdpw6AgcHJvbnRvIHBlciBlc3NlcmUgcmVnaXN0cmF0byBkYWwgdm9pY2Utb3Zlciwgc2VuemEgc2ludGVzaSBvIHJpYXNzdW50aS5cblxuICBRdWVzdGUgc29ubyBsZSBwcmVmZXJlbnplIGRlbGzigJl1dGVudGU6XG4gIOKAkyBOaWNjaGlhOiAke25pY2hlfVxuICDigJMgU3RpbGUgbmFycmF0aXZvIHNjZWx0bzogJHtzdHlsZX1cbiAg4oCTIEludGVuc2l0w6AgZW1vdGl2YTogJHtpbnRlbnNpdHl9XG4gIGAsXG4gICAgfSk7XG5cbiAgICAvLyBBdnZpYSBpbCBydW4gY29uIGwnQXNzaXN0YW50IHBlcnNvbmFsZVxuICAgIGNvbnN0IHJ1biA9IGF3YWl0IG9wZW5haS5iZXRhLnRocmVhZHMucnVucy5jcmVhdGUodGhyZWFkLmlkLCB7XG4gICAgICBhc3Npc3RhbnRfaWQ6ICdhc3N0X2s4blVwRUNVc1BuakNnUE9mTmRyczllbCcsIC8vIPCflIEgSW5zZXJpc2NpIHF1aSBpbCB0dW8gdmVybyBBc3Npc3RhbnQgSURcbiAgICB9KTtcblxuICAgIC8vIEFzcGV0dGEgY2hlIGlsIHJ1biBzaWEgY29tcGxldGF0b1xuICAgIGxldCByZXN1bHQgPSBudWxsO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjA7IGkrKykge1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHIpID0+IHNldFRpbWVvdXQociwgMTUwMCkpO1xuICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBvcGVuYWkuYmV0YS50aHJlYWRzLnJ1bnMucmV0cmlldmUodGhyZWFkLmlkLCBydW4uaWQpO1xuICAgICAgaWYgKGNoZWNrLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcpIHtcbiAgICAgICAgcmVzdWx0ID0gY2hlY2s7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghcmVzdWx0KSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ1RpbWVvdXQgZHVyYW50ZSBsYSBnZW5lcmF6aW9uZSBkZWxsbyBzY3JpcHQnIH0pO1xuICAgIH1cblxuICAgIC8vIFJlY3VwZXJhIGwndWx0aW1hIHJpc3Bvc3RhIGRlbGwnYXNzaXN0ZW50ZVxuICAgIC8vIFJlY3VwZXJhIHR1dHRpIGkgbWVzc2FnZ2lcbiAgICBjb25zdCBtZXNzYWdlcyA9IGF3YWl0IG9wZW5haS5iZXRhLnRocmVhZHMubWVzc2FnZXMubGlzdCh0aHJlYWQuaWQpO1xuICAgIGNvbnNvbGUubG9nKCdNRVNTQUdFUzonLCBKU09OLnN0cmluZ2lmeShtZXNzYWdlcy5kYXRhLCBudWxsLCAyKSk7XG4gICAgLy8gVHJvdmEgaWwgbWVzc2FnZ2lvIHBpw7kgcmVjZW50ZSBkZWxsJ2Fzc2lzdGVudGVcbiAgICBjb25zdCBsYXN0QXNzaXN0YW50TWVzc2FnZSA9IG1lc3NhZ2VzLmRhdGEuZmluZCgobSkgPT4gbS5yb2xlID09PSAnYXNzaXN0YW50Jyk7XG5cbiAgICBpZiAoIWxhc3RBc3Npc3RhbnRNZXNzYWdlKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ05lc3N1biBtZXNzYWdnaW8gZGVsbOKAmWFzc2lzdGVudGUgdHJvdmF0bycpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgc2NyaXB0OiAnTmVzc3VuYSByaXNwb3N0YSBnZW5lcmF0YScgfSk7XG4gICAgfVxuXG4gICAgLy8gQ2VyY2EgaWwgY29udGVudXRvIGRpIHRpcG8gXCJ0ZXh0XCJcbiAgICBjb25zdCB0ZXh0QmxvY2sgPSBsYXN0QXNzaXN0YW50TWVzc2FnZS5jb250ZW50LmZpbmQoKGMpID0+IGMudHlwZSA9PT0gJ3RleHQnKTtcblxuICAgIGlmICghdGV4dEJsb2NrIHx8ICEoJ3RleHQnIGluIHRleHRCbG9jaykpIHtcbiAgICAgIGNvbnNvbGUud2FybignTmVzc3VuIGNvbnRlbnV0byB0ZXN0dWFsZSBuZWwgbWVzc2FnZ2lvOicsIGxhc3RBc3Npc3RhbnRNZXNzYWdlLmNvbnRlbnQpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgc2NyaXB0OiAnTmVzc3VuYSByaXNwb3N0YSBnZW5lcmF0YScgfSk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2NyaXB0ID0gdGV4dEJsb2NrLnRleHQudmFsdWUudHJpbSgpO1xuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgc2NyaXB0IH0pO1xuICB9XG4gIGNhdGNoIChlcnJvcikge1xuICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0Vycm9yZSBuZWxsYSBnZW5lcmF6aW9uZSBjb24gQXNzaXN0YW50JyB9KTtcbn1cbn0gXG4iXSwibmFtZXMiOlsiT3BlbkFJIiwib3BlbmFpIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImVuZCIsInRvcGljIiwibmljaGUiLCJzdHlsZSIsImludGVuc2l0eSIsImJvZHkiLCJ0aHJlYWQiLCJiZXRhIiwidGhyZWFkcyIsImNyZWF0ZSIsIm1lc3NhZ2VzIiwiaWQiLCJyb2xlIiwiY29udGVudCIsInJ1biIsInJ1bnMiLCJhc3Npc3RhbnRfaWQiLCJyZXN1bHQiLCJpIiwiUHJvbWlzZSIsInIiLCJzZXRUaW1lb3V0IiwiY2hlY2siLCJyZXRyaWV2ZSIsImpzb24iLCJlcnJvciIsImxpc3QiLCJjb25zb2xlIiwibG9nIiwiSlNPTiIsInN0cmluZ2lmeSIsImRhdGEiLCJsYXN0QXNzaXN0YW50TWVzc2FnZSIsImZpbmQiLCJtIiwid2FybiIsInNjcmlwdCIsInRleHRCbG9jayIsImMiLCJ0eXBlIiwidGV4dCIsInZhbHVlIiwidHJpbSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/genera.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenera&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fgenera.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();